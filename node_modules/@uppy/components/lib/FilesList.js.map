{"version":3,"names":["Fragment","h","useState","useEffect","prettyBytes","clsx","Thumbnail","FilesList","props","files","setFiles","ctx","editFile","_ctx$uppy","onStateUpdate","prev","next","patch","Object","values","uppy","on","_ctx$uppy2","off","className","map","file","_file$progress","_file$progress2","_file$progress3","key","id","width","height","name","size","type","onClick","_ctx$uppy3","removeFile","max","progress","uploadComplete","error","value","percentage"],"sources":["FilesList.tsx"],"sourcesContent":["/* eslint-disable react/destructuring-assignment */\nimport { Fragment, h } from 'preact'\nimport { useState, useEffect } from 'preact/hooks'\n\nimport type { Meta, Body, UppyEventMap, UppyFile } from '@uppy/core'\nimport prettyBytes from 'pretty-bytes'\nimport { clsx } from 'clsx'\nimport { Thumbnail, type UppyContext } from './index.js'\n\nexport type FilesListProps = {\n  editFile?: (file: UppyFile<Meta, Body>) => void\n  ctx: UppyContext\n}\n\nexport default function FilesList(props: FilesListProps) {\n  const [files, setFiles] = useState<UppyFile<any, any>[]>(() => [])\n  const { ctx, editFile } = props\n\n  useEffect(() => {\n    const onStateUpdate: UppyEventMap<any, any>['state-update'] = (\n      prev,\n      next,\n      patch,\n    ) => {\n      if (patch?.files) {\n        setFiles(Object.values(patch.files))\n      }\n    }\n    ctx.uppy?.on('state-update', onStateUpdate)\n    return () => {\n      ctx.uppy?.off('state-update', onStateUpdate)\n    }\n  }, [ctx.uppy])\n\n  return (\n    <ul data-uppy-element=\"files-list\" className=\"uppy-reset uppy:my-4\">\n      {files?.map((file) => (\n        <li key={file.id}>\n          <Fragment>\n            <div className=\"uppy:flex uppy:items-center uppy:gap-2\">\n              <div className=\"uppy:w-[32px] uppy:h-[32px]\">\n                <Thumbnail width=\"32px\" height=\"32px\" file={file} />\n              </div>\n\n              <p className=\"uppy:truncate\">{file.name}</p>\n              <p className=\"uppy:text-gray-500 uppy:tabular-nums uppy:min-w-18 uppy:text-right uppy:ml-auto\">\n                {prettyBytes(file.size || 0)}\n              </p>\n\n              <Fragment>\n                {editFile && (\n                  <button\n                    type=\"button\"\n                    className=\"uppy:flex uppy:rounded uppy:text-blue-500 uppy:hover:text-blue-700 uppy:bg-transparent uppy:transition-colors\"\n                    onClick={() => {\n                      editFile(file)\n                    }}\n                  >\n                    edit\n                  </button>\n                )}\n                <button\n                  type=\"button\"\n                  className=\"uppy:flex uppy:rounded uppy:text-blue-500 uppy:hover:text-blue-700 uppy:bg-transparent uppy:transition-colors\"\n                  onClick={() => {\n                    ctx.uppy?.removeFile(file.id)\n                  }}\n                >\n                  remove\n                </button>\n              </Fragment>\n            </div>\n            <progress\n              max=\"100\"\n              className={clsx(\n                'uppy:w-full uppy:h-[2px] uppy:appearance-none uppy:bg-gray-100 uppy:rounded-full uppy:overflow-hidden uppy:[&::-webkit-progress-bar]:bg-gray-100 uppy:block uppy:my-2',\n                {\n                  'uppy:[&::-webkit-progress-value]:bg-green-500 uppy:[&::-moz-progress-bar]:bg-green-500':\n                    file.progress?.uploadComplete,\n                  'uppy:[&::-webkit-progress-value]:bg-red-500 uppy:[&::-moz-progress-bar]:bg-red-500':\n                    file.error,\n                  'uppy:[&::-webkit-progress-value]:bg-blue-500 uppy:[&::-moz-progress-bar]:bg-blue-500':\n                    !file.progress?.uploadComplete && !file.error,\n                },\n              )}\n              value={file.progress?.percentage || 0}\n            />\n          </Fragment>\n        </li>\n      ))}\n    </ul>\n  )\n}\n"],"mappings":"AAAA;AACA,SAASA,QAAQ,EAAEC,CAAC,QAAQ,QAAQ;AACpC,SAASC,QAAQ,EAAEC,SAAS,QAAQ,cAAc;AAGlD,OAAOC,WAAW,MAAM,cAAc;AACtC,SAASC,IAAI,QAAQ,MAAM;AAC3B,SAASC,SAAS,QAA0B,YAAY;AAOxD,eAAe,SAASC,SAASA,CAACC,KAAqB,EAAE;EACvD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAuB,MAAM,EAAE,CAAC;EAClE,MAAM;IAAES,GAAG;IAAEC;EAAS,CAAC,GAAGJ,KAAK;EAE/BL,SAAS,CAAC,MAAM;IAAA,IAAAU,SAAA;IACd,MAAMC,aAAqD,GAAGA,CAC5DC,IAAI,EACJC,IAAI,EACJC,KAAK,KACF;MACH,IAAIA,KAAK,YAALA,KAAK,CAAER,KAAK,EAAE;QAChBC,QAAQ,CAACQ,MAAM,CAACC,MAAM,CAACF,KAAK,CAACR,KAAK,CAAC,CAAC;MACtC;IACF,CAAC;IACD,CAAAI,SAAA,GAAAF,GAAG,CAACS,IAAI,aAARP,SAAA,CAAUQ,EAAE,CAAC,cAAc,EAAEP,aAAa,CAAC;IAC3C,OAAO,MAAM;MAAA,IAAAQ,UAAA;MACX,CAAAA,UAAA,GAAAX,GAAG,CAACS,IAAI,aAARE,UAAA,CAAUC,GAAG,CAAC,cAAc,EAAET,aAAa,CAAC;IAC9C,CAAC;EACH,CAAC,EAAE,CAACH,GAAG,CAACS,IAAI,CAAC,CAAC;EAEd,OACEnB,CAAA;IAAI,qBAAkB,YAAY;IAACuB,SAAS,EAAC;EAAsB,GAChEf,KAAK,oBAALA,KAAK,CAAEgB,GAAG,CAAEC,IAAI;IAAA,IAAAC,cAAA,EAAAC,eAAA,EAAAC,eAAA;IAAA,OACf5B,CAAA;MAAI6B,GAAG,EAAEJ,IAAI,CAACK;IAAG,GACf9B,CAAA,CAACD,QAAQ,QACPC,CAAA;MAAKuB,SAAS,EAAC;IAAwC,GACrDvB,CAAA;MAAKuB,SAAS,EAAC;IAA6B,GAC1CvB,CAAA,CAACK,SAAS;MAAC0B,KAAK,EAAC,MAAM;MAACC,MAAM,EAAC,MAAM;MAACP,IAAI,EAAEA;IAAK,CAAE,CAChD,CAAC,EAENzB,CAAA;MAAGuB,SAAS,EAAC;IAAe,GAAEE,IAAI,CAACQ,IAAQ,CAAC,EAC5CjC,CAAA;MAAGuB,SAAS,EAAC;IAAiF,GAC3FpB,WAAW,CAACsB,IAAI,CAACS,IAAI,IAAI,CAAC,CAC1B,CAAC,EAEJlC,CAAA,CAACD,QAAQ,QACNY,QAAQ,IACPX,CAAA;MACEmC,IAAI,EAAC,QAAQ;MACbZ,SAAS,EAAC,+GAA+G;MACzHa,OAAO,EAAEA,CAAA,KAAM;QACbzB,QAAQ,CAACc,IAAI,CAAC;MAChB;IAAE,GACH,MAEO,CACT,EACDzB,CAAA;MACEmC,IAAI,EAAC,QAAQ;MACbZ,SAAS,EAAC,+GAA+G;MACzHa,OAAO,EAAEA,CAAA,KAAM;QAAA,IAAAC,UAAA;QACb,CAAAA,UAAA,GAAA3B,GAAG,CAACS,IAAI,aAARkB,UAAA,CAAUC,UAAU,CAACb,IAAI,CAACK,EAAE,CAAC;MAC/B;IAAE,GACH,QAEO,CACA,CACP,CAAC,EACN9B,CAAA;MACEuC,GAAG,EAAC,KAAK;MACThB,SAAS,EAAEnB,IAAI,CACb,uKAAuK,EACvK;QACE,wFAAwF,GAAAsB,cAAA,GACtFD,IAAI,CAACe,QAAQ,qBAAbd,cAAA,CAAee,cAAc;QAC/B,oFAAoF,EAClFhB,IAAI,CAACiB,KAAK;QACZ,sFAAsF,EACpF,GAAAf,eAAA,GAACF,IAAI,CAACe,QAAQ,aAAbb,eAAA,CAAec,cAAc,KAAI,CAAChB,IAAI,CAACiB;MAC5C,CACF,CAAE;MACFC,KAAK,EAAE,EAAAf,eAAA,GAAAH,IAAI,CAACe,QAAQ,qBAAbZ,eAAA,CAAegB,UAAU,KAAI;IAAE,CACvC,CACO,CACR,CAAC;EAAA,CACN,CACC,CAAC;AAET","ignoreList":[]}