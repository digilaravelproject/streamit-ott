{"version":3,"names":["h","useState","useRef","clsx","Dropzone","props","fileInputRef","isDragging","setIsDragging","width","height","note","noClick","ctx","handleDrop","event","_event$dataTransfer","_ctx$uppy","preventDefault","stopPropagation","files","Array","from","dataTransfer","length","uppy","addFiles","map","file","source","name","type","data","handleDragOver","handleDragEnter","handleDragLeave","handleClick","_fileInputRef$current","current","click","handleFileInputChange","_ctx$uppy2","input","target","value","className","ref","multiple","onChange","role","tabIndex","style","onDrop","onDragOver","onDragEnter","onDragLeave","onClick"],"sources":["Dropzone.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport { h } from 'preact'\nimport { useState, useRef } from 'preact/hooks'\nimport { clsx } from 'clsx'\nimport type { UppyContext } from './types.js'\n\nexport type DropzoneProps = {\n  width?: string\n  height?: string\n  note?: string\n  noClick?: boolean\n  ctx: UppyContext\n}\n\nexport default function Dropzone(props: DropzoneProps) {\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const [isDragging, setIsDragging] = useState(() => false)\n  const { width, height, note, noClick, ctx } = props\n\n  function handleDrop(event: DragEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n    setIsDragging(false)\n    const files = Array.from(event.dataTransfer?.files || [])\n    if (!files.length) return\n    ctx.uppy?.addFiles(\n      files.map((file) => ({\n        source: 'drag-drop',\n        name: file.name,\n        type: file.type,\n        data: file,\n      })),\n    )\n  }\n\n  function handleDragOver(event: DragEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n  }\n\n  function handleDragEnter(event: DragEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n    setIsDragging(true)\n  }\n\n  function handleDragLeave(event: DragEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n    setIsDragging(false)\n  }\n\n  function handleClick() {\n    if (noClick) return\n    fileInputRef.current?.click()\n  }\n\n  function handleFileInputChange(event: Event) {\n    const input = event.target as HTMLInputElement\n    const files = Array.from(input.files || [])\n    if (!files.length) return\n    ctx.uppy?.addFiles(\n      files.map((file) => ({\n        source: 'drag-drop',\n        name: file.name,\n        type: file.type,\n        data: file,\n      })),\n    )\n\n    // Reset the input value so the same file can be selected again\n    input.value = ''\n  }\n\n  return (\n    <div className=\"uppy-reset\" data-uppy-element=\"dropzone\">\n      <input\n        type=\"file\"\n        className=\"uppy:hidden\"\n        ref={fileInputRef}\n        multiple\n        onChange={handleFileInputChange}\n      />\n      <div\n        role=\"button\"\n        tabIndex={0}\n        style={{\n          width: width || '100%',\n          height: height || '100%',\n        }}\n        className={clsx(\n          'uppy:border-2 uppy:border-dashed uppy:border-gray-300',\n          'uppy:rounded-lg uppy:p-6 uppy:bg-gray-50',\n          'uppy:transition-colors uppy:duration-200',\n          {\n            'uppy:bg-blue-50': isDragging,\n          },\n          {\n            'uppy:cursor-pointer uppy:hover:bg-blue-50': !noClick,\n          },\n        )}\n        onDrop={handleDrop}\n        onDragOver={handleDragOver}\n        onDragEnter={handleDragEnter}\n        onDragLeave={handleDragLeave}\n        onClick={handleClick}\n      >\n        <div className=\"uppy:flex uppy:flex-col uppy:items-center uppy:justify-center uppy:h-full uppy:space-y-3\">\n          <p className=\"uppy:text-gray-600\">\n            Drop files here or click to add them\n          </p>\n        </div>\n        {note ?\n          <div className=\"uppy:text-sm uppy:text-gray-500\">{note}</div>\n        : null}\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}