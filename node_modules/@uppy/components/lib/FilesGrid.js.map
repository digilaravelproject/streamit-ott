{"version":3,"names":["Fragment","h","useState","useEffect","prettyBytes","clsx","Thumbnail","FilesGrid","props","files","setFiles","ctx","editFile","gridColsClass","columns","_ctx$uppy","onStateUpdate","prev","next","patch","Object","values","uppy","on","_ctx$uppy2","off","className","map","file","key","id","images","title","name","size","type","onClick","_ctx$uppy3","removeFile"],"sources":["FilesGrid.tsx"],"sourcesContent":["/* eslint-disable react/destructuring-assignment */\nimport { Fragment, h } from 'preact'\nimport { useState, useEffect } from 'preact/hooks'\n\nimport type { Body, Meta, UppyEventMap, UppyFile } from '@uppy/core'\nimport prettyBytes from 'pretty-bytes'\nimport { clsx } from 'clsx'\nimport { Thumbnail } from './index.js'\nimport type { UppyContext } from './types.js'\n\nexport type FilesGridProps = {\n  editFile?: (file: UppyFile<Meta, Body>) => void\n  columns?: number\n  ctx: UppyContext\n}\n\nexport default function FilesGrid(props: FilesGridProps) {\n  const [files, setFiles] = useState<UppyFile<Meta, Body>[]>(() => [])\n  const { ctx, editFile } = props\n\n  function gridColsClass() {\n    return (\n      {\n        1: 'uppy:grid-cols-1',\n        2: 'uppy:grid-cols-2',\n        3: 'uppy:grid-cols-3',\n        4: 'uppy:grid-cols-4',\n        5: 'uppy:grid-cols-5',\n        6: 'uppy:grid-cols-6',\n      }[props.columns || 2] || 'uppy:grid-cols-2'\n    )\n  }\n\n  useEffect(() => {\n    const onStateUpdate: UppyEventMap<any, any>['state-update'] = (\n      prev,\n      next,\n      patch,\n    ) => {\n      if (patch?.files) {\n        setFiles(Object.values(patch.files))\n      }\n    }\n    ctx.uppy?.on('state-update', onStateUpdate)\n    return () => {\n      ctx.uppy?.off('state-update', onStateUpdate)\n    }\n  }, [ctx.uppy])\n\n  return (\n    <div\n      data-uppy-element=\"files-grid\"\n      className={clsx(\n        'uppy:reset uppy:my-4 uppy:grid uppy:gap-4',\n        gridColsClass(),\n      )}\n    >\n      {files?.map((file) => (\n        <div\n          className=\"uppy:flex uppy:flex-col uppy:items-center uppy:gap-2\"\n          key={file.id}\n        >\n          <Fragment>\n            <Thumbnail images file={file} />\n            <div className=\"uppy:w-full uppy-reset\">\n              <p className=\"uppy:font-medium uppy:truncate\" title={file.name}>\n                {file.name}\n              </p>\n              <div className=\"uppy:flex uppy:items-center uppy:gap-2\">\n                <p className=\" uppy:text-gray-500 uppy:tabular-nums \">\n                  {prettyBytes(file.size || 0)}\n                </p>\n\n                {editFile && (\n                  <button\n                    type=\"button\"\n                    className=\"uppy:flex uppy:rounded uppy:text-blue-500 uppy:hover:text-blue-700 uppy:bg-transparent uppy:transition-colors\"\n                    onClick={() => {\n                      editFile(file)\n                    }}\n                  >\n                    edit\n                  </button>\n                )}\n\n                <button\n                  type=\"button\"\n                  className=\"uppy:flex uppy:rounded uppy:text-blue-500 uppy:hover:text-blue-700 uppy:bg-transparent uppy:transition-colors\"\n                  onClick={() => {\n                    ctx.uppy?.removeFile(file.id)\n                  }}\n                >\n                  remove\n                </button>\n              </div>\n            </div>\n          </Fragment>\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"mappings":"AAAA;AACA,SAASA,QAAQ,EAAEC,CAAC,QAAQ,QAAQ;AACpC,SAASC,QAAQ,EAAEC,SAAS,QAAQ,cAAc;AAGlD,OAAOC,WAAW,MAAM,cAAc;AACtC,SAASC,IAAI,QAAQ,MAAM;AAC3B,SAASC,SAAS,QAAQ,YAAY;AAStC,eAAe,SAASC,SAASA,CAACC,KAAqB,EAAE;EACvD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAyB,MAAM,EAAE,CAAC;EACpE,MAAM;IAAES,GAAG;IAAEC;EAAS,CAAC,GAAGJ,KAAK;EAE/B,SAASK,aAAaA,CAAA,EAAG;IACvB,OACE;MACE,CAAC,EAAE,kBAAkB;MACrB,CAAC,EAAE,kBAAkB;MACrB,CAAC,EAAE,kBAAkB;MACrB,CAAC,EAAE,kBAAkB;MACrB,CAAC,EAAE,kBAAkB;MACrB,CAAC,EAAE;IACL,CAAC,CAACL,KAAK,CAACM,OAAO,IAAI,CAAC,CAAC,IAAI,kBAAkB;EAE/C;EAEAX,SAAS,CAAC,MAAM;IAAA,IAAAY,SAAA;IACd,MAAMC,aAAqD,GAAGA,CAC5DC,IAAI,EACJC,IAAI,EACJC,KAAK,KACF;MACH,IAAIA,KAAK,YAALA,KAAK,CAAEV,KAAK,EAAE;QAChBC,QAAQ,CAACU,MAAM,CAACC,MAAM,CAACF,KAAK,CAACV,KAAK,CAAC,CAAC;MACtC;IACF,CAAC;IACD,CAAAM,SAAA,GAAAJ,GAAG,CAACW,IAAI,aAARP,SAAA,CAAUQ,EAAE,CAAC,cAAc,EAAEP,aAAa,CAAC;IAC3C,OAAO,MAAM;MAAA,IAAAQ,UAAA;MACX,CAAAA,UAAA,GAAAb,GAAG,CAACW,IAAI,aAARE,UAAA,CAAUC,GAAG,CAAC,cAAc,EAAET,aAAa,CAAC;IAC9C,CAAC;EACH,CAAC,EAAE,CAACL,GAAG,CAACW,IAAI,CAAC,CAAC;EAEd,OACErB,CAAA;IACE,qBAAkB,YAAY;IAC9ByB,SAAS,EAAErB,IAAI,CACb,2CAA2C,EAC3CQ,aAAa,CAAC,CAChB;EAAE,GAEDJ,KAAK,oBAALA,KAAK,CAAEkB,GAAG,CAAEC,IAAI,IACf3B,CAAA;IACEyB,SAAS,EAAC,sDAAsD;IAChEG,GAAG,EAAED,IAAI,CAACE;EAAG,GAEb7B,CAAA,CAACD,QAAQ,QACPC,CAAA,CAACK,SAAS;IAACyB,MAAM;IAACH,IAAI,EAAEA;EAAK,CAAE,CAAC,EAChC3B,CAAA;IAAKyB,SAAS,EAAC;EAAwB,GACrCzB,CAAA;IAAGyB,SAAS,EAAC,gCAAgC;IAACM,KAAK,EAAEJ,IAAI,CAACK;EAAK,GAC5DL,IAAI,CAACK,IACL,CAAC,EACJhC,CAAA;IAAKyB,SAAS,EAAC;EAAwC,GACrDzB,CAAA;IAAGyB,SAAS,EAAC;EAAwC,GAClDtB,WAAW,CAACwB,IAAI,CAACM,IAAI,IAAI,CAAC,CAC1B,CAAC,EAEHtB,QAAQ,IACPX,CAAA;IACEkC,IAAI,EAAC,QAAQ;IACbT,SAAS,EAAC,+GAA+G;IACzHU,OAAO,EAAEA,CAAA,KAAM;MACbxB,QAAQ,CAACgB,IAAI,CAAC;IAChB;EAAE,GACH,MAEO,CACT,EAED3B,CAAA;IACEkC,IAAI,EAAC,QAAQ;IACbT,SAAS,EAAC,+GAA+G;IACzHU,OAAO,EAAEA,CAAA,KAAM;MAAA,IAAAC,UAAA;MACb,CAAAA,UAAA,GAAA1B,GAAG,CAACW,IAAI,aAARe,UAAA,CAAUC,UAAU,CAACV,IAAI,CAACE,EAAE,CAAC;IAC/B;EAAE,GACH,QAEO,CACL,CACF,CACG,CACP,CACN,CACE,CAAC;AAEV","ignoreList":[]}