{"version":3,"names":["defineComponent","ref","watch","onMounted","h","UploadButton","PreactUploadButton","preactH","render","preactRender","shallowEqualObjects","useUppyContext","name","setup","props","_ref","attrs","containerRef","ctx","renderUploadButton","value","current","old"],"sources":["UploadButton.ts"],"sourcesContent":["import { defineComponent, ref, watch, onMounted, h } from 'vue'\nimport {\n  UploadButton as PreactUploadButton,\n  type UploadButtonProps,\n} from '@uppy/components'\nimport { h as preactH } from 'preact'\nimport { render as preactRender } from 'preact/compat'\nimport { shallowEqualObjects } from 'shallow-equal'\nimport { useUppyContext } from './useUppyContext.js'\n\nexport default defineComponent<Omit<UploadButtonProps, 'ctx'>>({\n  name: 'UploadButton',\n  setup(props, { attrs }) {\n    const containerRef = ref<HTMLElement | null>(null)\n    const ctx = useUppyContext()\n\n    function renderUploadButton() {\n      if (containerRef.value) {\n        preactRender(\n          preactH(PreactUploadButton, {\n            ...(attrs as UploadButtonProps),\n            ctx,\n          } satisfies UploadButtonProps),\n          containerRef.value,\n        )\n      }\n    }\n\n    onMounted(() => {\n      renderUploadButton()\n    })\n\n    watch(ctx, () => {\n      renderUploadButton()\n    })\n\n    watch(\n      () => props,\n      (current, old) => {\n        if (!shallowEqualObjects(current, old)) {\n          renderUploadButton()\n        }\n      },\n    )\n\n    return () => h('div', { ref: containerRef })\n  },\n})\n"],"mappings":"AAAA,SAASA,eAAe,EAAEC,GAAG,EAAEC,KAAK,EAAEC,SAAS,EAAEC,CAAC,QAAQ,KAAK;AAC/D,SACEC,YAAY,IAAIC,kBAAkB,QAE7B,kBAAkB;AACzB,SAASF,CAAC,IAAIG,OAAO,QAAQ,QAAQ;AACrC,SAASC,MAAM,IAAIC,YAAY,QAAQ,eAAe;AACtD,SAASC,mBAAmB,QAAQ,eAAe;AACnD,SAASC,cAAc,QAAQ,qBAAqB;AAEpD,eAAeX,eAAe,CAAiC;EAC7DY,IAAI,EAAE,cAAc;EACpBC,KAAKA,CAACC,KAAK,EAAAC,IAAA,EAAa;IAAA,IAAX;MAAEC;IAAM,CAAC,GAAAD,IAAA;IACpB,MAAME,YAAY,GAAGhB,GAAG,CAAqB,IAAI,CAAC;IAClD,MAAMiB,GAAG,GAAGP,cAAc,CAAC,CAAC;IAE5B,SAASQ,kBAAkBA,CAAA,EAAG;MAC5B,IAAIF,YAAY,CAACG,KAAK,EAAE;QACtBX,YAAY,CACVF,OAAO,CAACD,kBAAkB,EAAE;UAC1B,GAAIU,KAA2B;UAC/BE;QACF,CAA6B,CAAC,EAC9BD,YAAY,CAACG,KACf,CAAC;MACH;IACF;IAEAjB,SAAS,CAAC,MAAM;MACdgB,kBAAkB,CAAC,CAAC;IACtB,CAAC,CAAC;IAEFjB,KAAK,CAACgB,GAAG,EAAE,MAAM;MACfC,kBAAkB,CAAC,CAAC;IACtB,CAAC,CAAC;IAEFjB,KAAK,CACH,MAAMY,KAAK,EACX,CAACO,OAAO,EAAEC,GAAG,KAAK;MAChB,IAAI,CAACZ,mBAAmB,CAACW,OAAO,EAAEC,GAAG,CAAC,EAAE;QACtCH,kBAAkB,CAAC,CAAC;MACtB;IACF,CACF,CAAC;IAED,OAAO,MAAMf,CAAC,CAAC,KAAK,EAAE;MAAEH,GAAG,EAAEgB;IAAa,CAAC,CAAC;EAC9C;AACF,CAAC,CAAC","ignoreList":[]}