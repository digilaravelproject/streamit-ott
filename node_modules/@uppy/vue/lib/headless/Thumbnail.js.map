{"version":3,"names":["defineComponent","ref","watch","onMounted","h","Thumbnail","PreactThumbnail","preactH","render","preactRender","shallowEqualObjects","useUppyContext","name","setup","props","_ref","attrs","containerRef","ctx","renderThumbnail","value","current","old"],"sources":["Thumbnail.ts"],"sourcesContent":["import { defineComponent, ref, watch, onMounted, h } from 'vue'\nimport {\n  Thumbnail as PreactThumbnail,\n  type ThumbnailProps,\n} from '@uppy/components'\nimport { h as preactH } from 'preact'\nimport { render as preactRender } from 'preact/compat'\nimport { shallowEqualObjects } from 'shallow-equal'\nimport { useUppyContext } from './useUppyContext.js'\n\nexport default defineComponent<Omit<ThumbnailProps, 'ctx'>>({\n  name: 'Thumbnail',\n  setup(props, { attrs }) {\n    const containerRef = ref<HTMLElement | null>(null)\n    const ctx = useUppyContext()\n\n    function renderThumbnail() {\n      if (containerRef.value) {\n        preactRender(\n          preactH(PreactThumbnail, {\n            ...(attrs as ThumbnailProps),\n            ctx,\n          } satisfies ThumbnailProps),\n          containerRef.value,\n        )\n      }\n    }\n\n    onMounted(() => {\n      renderThumbnail()\n    })\n\n    watch(ctx, () => {\n      renderThumbnail()\n    })\n\n    watch(\n      () => props,\n      (current, old) => {\n        if (!shallowEqualObjects(current, old)) {\n          renderThumbnail()\n        }\n      },\n    )\n\n    return () => h('div', { ref: containerRef })\n  },\n})\n"],"mappings":"AAAA,SAASA,eAAe,EAAEC,GAAG,EAAEC,KAAK,EAAEC,SAAS,EAAEC,CAAC,QAAQ,KAAK;AAC/D,SACEC,SAAS,IAAIC,eAAe,QAEvB,kBAAkB;AACzB,SAASF,CAAC,IAAIG,OAAO,QAAQ,QAAQ;AACrC,SAASC,MAAM,IAAIC,YAAY,QAAQ,eAAe;AACtD,SAASC,mBAAmB,QAAQ,eAAe;AACnD,SAASC,cAAc,QAAQ,qBAAqB;AAEpD,eAAeX,eAAe,CAA8B;EAC1DY,IAAI,EAAE,WAAW;EACjBC,KAAKA,CAACC,KAAK,EAAAC,IAAA,EAAa;IAAA,IAAX;MAAEC;IAAM,CAAC,GAAAD,IAAA;IACpB,MAAME,YAAY,GAAGhB,GAAG,CAAqB,IAAI,CAAC;IAClD,MAAMiB,GAAG,GAAGP,cAAc,CAAC,CAAC;IAE5B,SAASQ,eAAeA,CAAA,EAAG;MACzB,IAAIF,YAAY,CAACG,KAAK,EAAE;QACtBX,YAAY,CACVF,OAAO,CAACD,eAAe,EAAE;UACvB,GAAIU,KAAwB;UAC5BE;QACF,CAA0B,CAAC,EAC3BD,YAAY,CAACG,KACf,CAAC;MACH;IACF;IAEAjB,SAAS,CAAC,MAAM;MACdgB,eAAe,CAAC,CAAC;IACnB,CAAC,CAAC;IAEFjB,KAAK,CAACgB,GAAG,EAAE,MAAM;MACfC,eAAe,CAAC,CAAC;IACnB,CAAC,CAAC;IAEFjB,KAAK,CACH,MAAMY,KAAK,EACX,CAACO,OAAO,EAAEC,GAAG,KAAK;MAChB,IAAI,CAACZ,mBAAmB,CAACW,OAAO,EAAEC,GAAG,CAAC,EAAE;QACtCH,eAAe,CAAC,CAAC;MACnB;IACF,CACF,CAAC;IAED,OAAO,MAAMf,CAAC,CAAC,KAAK,EAAE;MAAEH,GAAG,EAAEgB;IAAa,CAAC,CAAC;EAC9C;AACF,CAAC,CAAC","ignoreList":[]}